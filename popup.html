<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body { 
        width: 280px; 
        padding: 20px; 
        font-family: 'Segoe UI', Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }
    
    .container {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        padding: 15px;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    h3 {
        text-align: center;
        margin: 0 0 15px 0;
        font-weight: 300;
        text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 30px;
        margin-right: 10px;
    }
    
    .switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    
    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: .4s;
        border-radius: 34px;
        box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
    }
    
    .slider:before {
        position: absolute;
        content: "";
        height: 22px;
        width: 22px;
        left: 4px;
        bottom: 4px;
        background: linear-gradient(45deg, #fff, #f0f0f0);
        transition: .4s;
        border-radius: 50%;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    input:checked + .slider {
        background: linear-gradient(45deg, #4CAF50, #45a049);
    }
    
    input:checked + .slider:before {
        transform: translateX(30px);
        background: linear-gradient(45deg, #fff, #e0e0e0);
    }
    
    button {
        margin: 8px 0;
        padding: 12px;
        background: linear-gradient(45deg, #FF416C, #FF4B2B);
        color: white;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        width: 100%;
        font-weight: 500;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(255, 75, 43, 0.4);
    }
    
    button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255, 75, 43, 0.6);
    }
    
    button:active {
        transform: translateY(0);
        box-shadow: 0 2px 10px rgba(255, 75, 43, 0.4);
    }
    
    .btn-secondary {
        background: linear-gradient(45deg, #667eea, #764ba2);
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }
    
    .btn-secondary:hover {
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
    }
    
    input[type="number"] {
        width: 60px;
        padding: 10px;
        border: none;
        border-radius: 20px;
        text-align: center;
        font-size: 16px;
        background: rgba(255, 255, 255, 0.9);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .status {
        margin: 15px 0;
        padding: 15px;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 12px;
        text-align: center;
        font-size: 14px;
        backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .section {
        margin: 15px 0;
        padding: 15px 0;
        border-top: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .timer-display {
        font-size: 24px;
        font-weight: bold;
        margin: 10px 0;
        text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
  <div class="container">
    <h3>üéÆ YouTube Blocker</h3>
    
    <div class="status" id="status">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–∞...</div>
    
    <div class="section">
        <label class="switch">
            <input type="checkbox" id="toggleBlocking">
            <span class="slider"></span>
        </label>
        <span style="font-weight: 500;">–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ YouTube</span>
    </div>
    
    <div class="section">
        <div style="text-align: center; margin-bottom: 10px;">
            <span style="display: block; margin-bottom: 8px;">‚è∞ –¢–∞–π–º–µ—Ä –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏</span>
            <input type="number" id="timerInput" min="1" value="60" placeholder="–ú–∏–Ω—É—Ç—ã">
        </div>
        <button id="setTimer" class="btn-secondary">üöÄ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä</button>
    </div>
    
    <div class="section">
        <button id="disableToday">üéØ –û—Ç–∫–ª—é—á–∏—Ç—å –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        const toggle = document.getElementById('toggleBlocking');
        const timerInput = document.getElementById('timerInput');
        const setTimerBtn = document.getElementById('setTimer');
        const disableTodayBtn = document.getElementById('disableToday');
        const statusDiv = document.getElementById('status');

        // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫
        function animateButton(button) {
            if (button) {
                button.classList.add('button-press');
                setTimeout(() => {
                    button.classList.remove('button-press');
                }, 150);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function loadSettings() {
            browser.runtime.sendMessage({action: "getStatus"}).then(response => {
                if (response) {
                    toggle.checked = response.isBlocking;
                    timerInput.value = response.timerMinutes || 60;
                    
                    if (response.blockedUntil) {
                        const date = new Date(response.blockedUntil);
                        const now = new Date();
                        if (now < date) {
                            const mins = Math.floor((date - now) / 60000);
                            const hours = Math.floor(mins / 60);
                            const remainingMins = mins % 60;
                            statusDiv.innerHTML = `üõë –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ<br>‚è∞ ${hours}—á ${remainingMins}–º`;
                        } else {
                            statusDiv.innerHTML = '‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞';
                        }
                    } else {
                        statusDiv.innerHTML = response.isBlocking ? 
                            '‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞' : 
                            '‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞';
                    }
                }
            }).catch(error => {
                console.error('–û—à–∏–±–∫–∞:', error);
                statusDiv.innerHTML = '‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏';
            });
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function saveSettings(action, data) {
            browser.runtime.sendMessage({
                action: action,
                ...data
            }).then(result => {
                if (result && result.success) {
                    statusDiv.innerHTML = '‚úì –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ';
                    setTimeout(loadSettings, 1000);
                }
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
        loadSettings();

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        toggle.addEventListener('change', function() {
            saveSettings("toggleBlocking", {value: toggle.checked});
        });

        setTimerBtn.addEventListener('click', function() {
            const minutes = parseInt(timerInput.value);
            if (minutes > 0) {
                saveSettings("setTimer", {minutes: minutes});
            }
        });

        disableTodayBtn.addEventListener('click', function() {
            saveSettings("disableForToday", {});
        });
    });
  </script>
</body>
</html>